(function () {
// 'use strict';

angular.module('clientGuide')
.service('pensionCalculatorService',pensionCalculatorService);

pensionCalculatorService.$inject = [];

function pensionCalculatorService() {
  var service = this;
  var currentYear = new Date().getFullYear();
  var currentMonth = new Date().getMonth();



  service.getEstimatedYearOfRetirement = function (yearOfBirth,monthOfBirth,gender) {
    var lookupTable = service.loadRetirementAgeTableObject();
    var returnObject = {
      year: null,
      month: null,
      decimalValue: null
    };
    returnObject.decimalValue = (yearOfBirth+monthOfBirth/12+lookupTable[gender][yearOfBirth]);
    returnObject.year = Math.floor(returnObject.decimalValue);
    returnObject.month = service.decodeMonths(Math.round(((returnObject.decimalValue)%1)*12));
    return returnObject;
  };


  service.getTimeUntilRetirement = function (yearOfBirth,monthOfBirth,gender) {
    var retirementTimeObject = service.getEstimatedYearOfRetirement(yearOfBirth,monthOfBirth,gender);
    var timeUntilRetirementObject = {
      year: null,
      month: null,
      decimalValue: null
    };
    timeUntilRetirementObject.decimalValue = retirementTimeObject.decimalValue - currentYear - currentMonth/12;
    timeUntilRetirementObject.year = Math.floor(timeUntilRetirementObject.decimalValue);
    timeUntilRetirementObject.month = (Math.round(((timeUntilRetirementObject.decimalValue)%1)*12));
    return timeUntilRetirementObject;
  };



  service.decodeMonths = function (monthInt) {
    var lookupTableObject = {
      0: "lednu",
      1: "únoru",
      2: "březnu",
      3: "dubnu",
      4: "květnu",
      5: "červnu",
      6: "červenci",
      7: "srpnu",
      8: "září",
      9: "říjnu",
      10: "listopadu",
      11: "prosinci"
    };
    return lookupTableObject[monthInt];
  };

  // service.getCurrentAge = function (yearOfBirth) {
  //   return (currentYear - yearOfBirth);
  // };

  service.loadRetirementAgeTableObject = function () {
    var tableObject =
    {
      man: {
        '1951' : 62.6666666666667,
        '1952' : 62.8333333333333,
        '1953' : 63,
        '1954' : 63.1666666666667,
        '1955' : 63.3333333333333,
        '1956' : 63.5,
        '1957' : 63.6666666666667,
        '1958' : 63.8333333333333,
        '1959' : 64,
        '1960' : 64.1666666666667,
        '1961' : 64.3333333333333,
        '1962' : 64.5,
        '1963' : 64.6666666666667,
        '1964' : 64.8333333333333,
        '1965' : 65,
        '1966' : 65.1666666666667,
        '1967' : 65.3333333333333,
        '1968' : 65.5,
        '1969' : 65.6666666666667,
        '1970' : 65.8333333333333,
        '1971' : 66,
        '1972' : 66.1666666666667,
        '1973' : 66.3333333333333,
        '1974' : 66.5,
        '1975' : 66.6666666666667,
        '1976' : 66.8333333333333,
        '1977' : 67,
        '1978' : 67.1666666666667,
        '1979' : 67.3333333333333,
        '1980' : 67.5,
        '1981' : 67.6666666666667,
        '1982' : 67.8333333333333,
        '1983' : 68,
        '1984' : 68.1666666666667,
        '1985' : 68.3333333333333,
        '1986' : 68.5,
        '1987' : 68.6666666666667,
        '1988' : 68.8333333333333,
        '1989' : 69,
        '1990' : 69.1666666666667,
        '1991' : 69.3333333333333,
        '1992' : 69.5,
        '1993' : 69.6666666666667,
        '1994' : 69.8333333333333,
        '1995' : 70,
        '1996' : 70.1666666666667,
        '1997' : 70.3333333333333,
        '1998' : 70.5,
        '1999' : 70.6666666666667,
        '2000' : 70.8333333333333,
      },
      'woman-single': {
        '1951' : 61.3333333333333,
        '1952' : 61.6666666666667,
        '1953' : 62,
        '1954' : 62.3333333333333,
        '1955' : 62.6666666666667,
        '1956' : 63.1666666666667,
        '1957' : 63.6666666666667,
        '1958' : 63.8333333333333,
        '1959' : 64,
        '1960' : 64.1666666666667,
        '1961' : 64.3333333333333,
        '1962' : 64.5,
        '1963' : 64.6666666666667,
        '1964' : 64.8333333333333,
        '1965' : 65,
        '1966' : 65.1666666666667,
        '1967' : 65.3333333333333,
        '1968' : 65.5,
        '1969' : 65.6666666666667,
        '1970' : 65.8333333333333,
        '1971' : 66,
        '1972' : 66.1666666666667,
        '1973' : 66.3333333333333,
        '1974' : 66.5,
        '1975' : 66.6666666666667,
        '1976' : 66.8333333333333,
        '1977' : 67,
        '1978' : 67.1666666666667,
        '1979' : 67.3333333333333,
        '1980' : 67.5,
        '1981' : 67.6666666666667,
        '1982' : 67.8333333333333,
        '1983' : 68,
        '1984' : 68.1666666666667,
        '1985' : 68.3333333333333,
        '1986' : 68.5,
        '1987' : 68.6666666666667,
        '1988' : 68.8333333333333,
        '1989' : 69,
        '1990' : 69.1666666666667,
        '1991' : 69.3333333333333,
        '1992' : 69.5,
        '1993' : 69.6666666666667,
        '1994' : 69.8333333333333,
        '1995' : 70,
        '1996' : 70.1666666666667,
        '1997' : 70.3333333333333,
        '1998' : 70.5,
        '1999' : 70.6666666666667,
        '2000' : 70.8333333333333,
      },
      'woman-1-kid': {
        '1951' : 60,
        '1952' : 60.3333333333333,
        '1953' : 60.6666666666667,
        '1954' : 61,
        '1955' : 61.3333333333333,
        '1956' : 61.6666666666667,
        '1957' : 62.1666666666667,
        '1958' : 62.6666666666667,
        '1959' : 63.1666666666667,
        '1960' : 63.6666666666667,
        '1961' : 64.1666666666667,
        '1962' : 64.5,
        '1963' : 64.6666666666667,
        '1964' : 64.8333333333333,
        '1965' : 65,
        '1966' : 65.1666666666667,
        '1967' : 65.3333333333333,
        '1968' : 65.5,
        '1969' : 65.6666666666667,
        '1970' : 65.8333333333333,
        '1971' : 66,
        '1972' : 66.1666666666667,
        '1973' : 66.3333333333333,
        '1974' : 66.5,
        '1975' : 66.6666666666667,
        '1976' : 66.8333333333333,
        '1977' : 67,
        '1978' : 67.1666666666667,
        '1979' : 67.3333333333333,
        '1980' : 67.5,
        '1981' : 67.6666666666667,
        '1982' : 67.8333333333333,
        '1983' : 68,
        '1984' : 68.1666666666667,
        '1985' : 68.3333333333333,
        '1986' : 68.5,
        '1987' : 68.6666666666667,
        '1988' : 68.8333333333333,
        '1989' : 69,
        '1990' : 69.1666666666667,
        '1991' : 69.3333333333333,
        '1992' : 69.5,
        '1993' : 69.6666666666667,
        '1994' : 69.8333333333333,
        '1995' : 70,
        '1996' : 70.1666666666667,
        '1997' : 70.3333333333333,
        '1998' : 70.5,
        '1999' : 70.6666666666667,
        '2000' : 70.8333333333333,
      },
      'woman-2-kids': {
        '1951' : 58.6666666666667,
        '1952' : 59,
        '1953' : 59.3333333333333,
        '1954' : 59.6666666666667,
        '1955' : 60,
        '1956' : 60.3333333333333,
        '1957' : 60.6666666666667,
        '1958' : 61.1666666666667,
        '1959' : 61.6666666666667,
        '1960' : 62.1666666666667,
        '1961' : 62.6666666666667,
        '1962' : 63.1666666666667,
        '1963' : 63.6666666666667,
        '1964' : 64.1666666666667,
        '1965' : 64.6666666666667,
        '1966' : 65.1666666666667,
        '1967' : 65.3333333333333,
        '1968' : 65.5,
        '1969' : 65.6666666666667,
        '1970' : 65.8333333333333,
        '1971' : 66,
        '1972' : 66.1666666666667,
        '1973' : 66.3333333333333,
        '1974' : 66.5,
        '1975' : 66.6666666666667,
        '1976' : 66.8333333333333,
        '1977' : 67,
        '1978' : 67.1666666666667,
        '1979' : 67.3333333333333,
        '1980' : 67.5,
        '1981' : 67.6666666666667,
        '1982' : 67.8333333333333,
        '1983' : 68,
        '1984' : 68.1666666666667,
        '1985' : 68.3333333333333,
        '1986' : 68.5,
        '1987' : 68.6666666666667,
        '1988' : 68.8333333333333,
        '1989' : 69,
        '1990' : 69.1666666666667,
        '1991' : 69.3333333333333,
        '1992' : 69.5,
        '1993' : 69.6666666666667,
        '1994' : 69.8333333333333,
        '1995' : 70,
        '1996' : 70.1666666666667,
        '1997' : 70.3333333333333,
        '1998' : 70.5,
        '1999' : 70.6666666666667,
        '2000' : 70.8333333333333,
      },
      'woman-3-kids':{
        '1951' : 57.3333333333333,
        '1952' : 57.6666666666667,
        '1953' : 58,
        '1954' : 58.3333333333333,
        '1955' : 58.6666666666667,
        '1956' : 59,
        '1957' : 59.3333333333333,
        '1958' : 59.6666666666667,
        '1959' : 60.1666666666667,
        '1960' : 60.6666666666667,
        '1961' : 61.1666666666667,
        '1962' : 61.6666666666667,
        '1963' : 62.1666666666667,
        '1964' : 62.6666666666667,
        '1965' : 63.1666666666667,
        '1966' : 63.6666666666667,
        '1967' : 64.1666666666667,
        '1968' : 64.6666666666667,
        '1969' : 65.1666666666667,
        '1970' : 65.6666666666667,
        '1971' : 66,
        '1972' : 66.1666666666667,
        '1973' : 66.3333333333333,
        '1974' : 66.5,
        '1975' : 66.6666666666667,
        '1976' : 66.8333333333333,
        '1977' : 67,
        '1978' : 67.1666666666667,
        '1979' : 67.3333333333333,
        '1980' : 67.5,
        '1981' : 67.6666666666667,
        '1982' : 67.8333333333333,
        '1983' : 68,
        '1984' : 68.1666666666667,
        '1985' : 68.3333333333333,
        '1986' : 68.5,
        '1987' : 68.6666666666667,
        '1988' : 68.8333333333333,
        '1989' : 69,
        '1990' : 69.1666666666667,
        '1991' : 69.3333333333333,
        '1992' : 69.5,
        '1993' : 69.6666666666667,
        '1994' : 69.8333333333333,
        '1995' : 70,
        '1996' : 70.1666666666667,
        '1997' : 70.3333333333333,
        '1998' : 70.5,
        '1999' : 70.6666666666667,
        '2000' : 70.8333333333333,
      },
      'woman-4-kids':{
        '1951' : 57.3333333333333,
        '1952' : 57.6666666666667,
        '1953' : 58,
        '1954' : 58.3333333333333,
        '1955' : 58.6666666666667,
        '1956' : 59,
        '1957' : 59.3333333333333,
        '1958' : 59.6666666666667,
        '1959' : 60.1666666666667,
        '1960' : 60.6666666666667,
        '1961' : 61.1666666666667,
        '1962' : 61.6666666666667,
        '1963' : 62.1666666666667,
        '1964' : 62.6666666666667,
        '1965' : 63.1666666666667,
        '1966' : 63.6666666666667,
        '1967' : 64.1666666666667,
        '1968' : 64.6666666666667,
        '1969' : 65.1666666666667,
        '1970' : 65.6666666666667,
        '1971' : 66,
        '1972' : 66.1666666666667,
        '1973' : 66.3333333333333,
        '1974' : 66.5,
        '1975' : 66.6666666666667,
        '1976' : 66.8333333333333,
        '1977' : 67,
        '1978' : 67.1666666666667,
        '1979' : 67.3333333333333,
        '1980' : 67.5,
        '1981' : 67.6666666666667,
        '1982' : 67.8333333333333,
        '1983' : 68,
        '1984' : 68.1666666666667,
        '1985' : 68.3333333333333,
        '1986' : 68.5,
        '1987' : 68.6666666666667,
        '1988' : 68.8333333333333,
        '1989' : 69,
        '1990' : 69.1666666666667,
        '1991' : 69.3333333333333,
        '1992' : 69.5,
        '1993' : 69.6666666666667,
        '1994' : 69.8333333333333,
        '1995' : 70,
        '1996' : 70.1666666666667,
        '1997' : 70.3333333333333,
        '1998' : 70.5,
        '1999' : 70.6666666666667,
        '2000' : 70.8333333333333,
      },
      'woman-5-kids':{
        '1951' : 56,
        '1952' : 56.3333333333333,
        '1953' : 56.6666666666667,
        '1954' : 57,
        '1955' : 57.3333333333333,
        '1956' : 57.6666666666667,
        '1957' : 58,
        '1958' : 58.3333333333333,
        '1959' : 58.6666666666667,
        '1960' : 59.1666666666667,
        '1961' : 59.6666666666667,
        '1962' : 60.1666666666667,
        '1963' : 60.6666666666667,
        '1964' : 61.1666666666667,
        '1965' : 61.6666666666667,
        '1966' : 62.1666666666667,
        '1967' : 62.6666666666667,
        '1968' : 63.1666666666667,
        '1969' : 63.6666666666667,
        '1970' : 64.1666666666667,
        '1971' : 64.6666666666667,
        '1972' : 65.1666666666667,
        '1973' : 65.6666666666667,
        '1974' : 66.1666666666667,
        '1975' : 66.6666666666667,
        '1976' : 66.8333333333333,
        '1977' : 67,
        '1978' : 67.1666666666667,
        '1979' : 67.3333333333333,
        '1980' : 67.5,
        '1981' : 67.6666666666667,
        '1982' : 67.8333333333333,
        '1983' : 68,
        '1984' : 68.1666666666667,
        '1985' : 68.3333333333333,
        '1986' : 68.5,
        '1987' : 68.6666666666667,
        '1988' : 68.8333333333333,
        '1989' : 69,
        '1990' : 69.1666666666667,
        '1991' : 69.3333333333333,
        '1992' : 69.5,
        '1993' : 69.6666666666667,
        '1994' : 69.8333333333333,
        '1995' : 70,
        '1996' : 70.1666666666667,
        '1997' : 70.3333333333333,
        '1998' : 70.5,
        '1999' : 70.6666666666667,
        '2000' : 70.8333333333333,
      },

    };

    return tableObject;
  };
}

})();
